<html>
  <head>
    <meta http-equiv='content-type' content='text/html;charset=utf-8'>
    <title>SiOPM MML reference (version 0.6.4)</title>
    <script type='text/javascript' src='jquery.js'></script>
    <script type='text/javascript' src='siopm.js'></script>
    <script type='text/javascript' src='siopm_mml_ref.js'></script>
    <style type='text/css'>
<!--
* html {
  overflow-y:scroll;
}
body {
  font-family: Tahoma, Verdana, Arial, Helvetica, sans-serif;
  font-size: 12px;
  color: #000000;
  background-color: #ffffff;
  margin: 0px;
  padding: 0px;
}


/* Headers */
h1, h2, h3, h4, h5, h6  {
  margin-top: 6px;
  margin-bottom: 6px;
}
h1 {
  font-size: 24px;
  font-weight: bold;
  padding-left: 10px;
}
h2 {
  font-size: 16px;
  font-weight: bold;
  padding-left: 10px;
  background-color:#ccccff;
}
h3 {
  font-size: 14px;
  font-weight: bold;
  color: #ffffff;
  background-color: #006699;
  padding-left: 10px;
  padding-top: 4px;
  padding-bottom: 4px;
}
h4 {
  font-size: 14px;
  font-weight: bold;
  color: #000000;
  background-color: #ccccff;
  padding-left: 20px;
}


/* Tables */
table {
  font-size: 12px;
  border-spacing: 0px;
  border-collapse: collapse;
}
thead {
  margin-top: 4px;
  font-weight: bold;
}
th {
  color: #ffffff;
  background-color: #4040c0;
  font-weight: bold;
  border: #999999 1px solid;
}
td {
  border: #999999 1px solid;
}
td.tone {
  background-color: #f0f0f0;
}
td.tone span.mml {
  display: none;
}
table.no_border th, table.no_border td {
  border-width: 0px;
}
.state {
  font-weight: bold;
  padding: 5px;
  width: 80px;
}
.state i {
  font-weight: normal;
}
.range {
  padding: 5px;
  width: 120px;
}
.desc {
  padding: 5px;
}
b {
  color: #c04040;
}
.notrec {
  color: #8080c0;
}


/* Headers */
.control {
  margin-left: 20px;
  font-size: 11px;
}
div.table {
  margin: 10px;
}
div.appendex {
  font-size: 12px;
  margin: 10px;
  padding: 5px;
  border: #999999 1px solid;
}
div.appendex div.title {
  padding: 2px;
  padding-left: 6px;
  font-weight: bold;
  background-color: #e0e0f0;
}
pre.example, pre.formula {
  width:640px;
  overflow-x: auto;
  display: block;
  font-family: "Courier New", Courier, monospace;
  margin: 4px;
  padding: 4px;
  background-color: #f0f0f0;
}
-->
    </style>
  </head>
  <body>
    <h1>SiOPM MML reference (version 0.6.4)</h1>
    <div class='copyright'>(c) keim +Si+ 2011</div>



    <h2>System operations</h2>
    <div class='section'>
      <h3>System commands</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#TITLE{...};</td>
            <td class='range'>(String)</td>
            <td class='desc'>Specify title.
<pre class='example'>
#TITLE{title};
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#SIGN{...};</td>
            <td class='range'>[A-G][+#-b]?m?</td>
            <td class='desc'>Specify key scale and set default key signitures group.<pre class='example'>
#SIGN{Fm}; fgab&lt;cdef;  // Set key signitures as Fm (flats on b,e,a and d)
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#REV{...};</td>
            <td class='range'>(octave|volume)</td>
            <td class='desc'>Reverse the octave or/and volume shift signs．With 'octave' option, the '<' is octave down and the '>' is octave up. With 'volume' option, the '(' is volume down and the ')' is volume up. Without any options (write only '#REV;'), reverse both meanings.
<pre class='example'>
#REV; cdefgab&gt;c;  // Same as "cdefgab&lt;c"
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#MACRO{...};</td>
            <td class='range'>(static|dynamic)</td>
            <td class='desc'>Spesify how to expand a macro in a macro. With 'static' option, expand in the macro definitions (default). With 'dynamic' option, expand when its expand.
<pre class='example'>
#MACRO{static};  #A=cde;#B=Afg;o5B; #A=gfe;o4B; // Expand as "o5cdefg; o4cdefg"
</pre>
<pre class='example'>
#MACRO{dynamic}; #A=cde;#B=Afg;o5B; #A=gfe;o4B; // Expand as "o5cdefg; o4gfefg"
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#VMODE{...};</td>
            <td class='range'>(n88|mdx|mck|tss|%x|%v)</td>
            <td class='desc'>Set all tracks %x and %v commands.
<pre class='example'>
#VMODE{n88}; v15cv12cv9c; // v command on log scale
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#TMODE{...};</td>
            <td class='range'>(unit|fps|timerb)=?n</td>
            <td class='desc'>Specify the unit of 't' command. With 'unit' option, t command parameter is divided by specifyed number. With 'fps' option, t command based on frames per beat. The 'timerb' option sets supplied clock speed (kHz) by n value, t command is based on OPMs timerB register value for 1/192 note.
<pre class='example'>
#TMODE{unit=100}; t10050cde; // t10050 means bpm=100.5
</pre>
<pre class='example'>
#TMODE{fps=60}; t30cde; // t30 means 30[frames/beat](bpm=120)
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#QUANT<i>n</i>;</td>
            <td class='range'>1 - (8)</td>
            <td class='desc'>Specify the maximum value of 'q' command. The default value of 'q' is 75% of the maximum value.
<pre class='example'>
#QUANT16; q8cde; // Set maximum value of 'q' to 16
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#FPS<i>n</i>;</td>
            <td class='range'>1 - 1000 (60)</td>
            <td class='desc'>Specify the default value of '@fps' command.
<pre class='example'>
#FPS100;  // Set default value of '@fps' to 100
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#END;</td>
            <td class='range'>&nbsp;</td>
            <td class='desc'>Ignore text after this command.
<pre class='example'>
#END; Ignore text here.
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>The format of '#SIGN{...};' system command</div>
          <div>
            <table class='no_border' style='margin:10px;'>
              <tr>
                <td>C,  Am</td><td>(no key signifures)</td>
              </tr>
              <tr>
                <td>G,  Em</td><td>f+</td>
              </tr>
              <tr>
                <td>D,  Bm</td><td>f+, c+</td>
              </tr>
              <tr>
                <td>A,  F+m, F#m</td><td>f+, c+, g+</td>
              </tr>
              <tr>
                <td>E,  C+m, C#m</td><td>f+, c+, g+, d+</td>
              </tr>
              <tr>
                <td>B,  G+m, G#m</td><td>f+, c+, g+, d+, a+</td>
              </tr>
              <tr>
                <td>F+, F#,  D+m, D#m</td><td>f+, c+, g+, d+, a+, e+</td>
              </tr>
              <tr>
                <td>C+, C#,  A+m, A#m</td><td>f+, c+, g+, d+, a+, e+, b+</td>
              </tr>
              <tr>
                <td>F,  Dm</td><td>b-</td>
              </tr>
              <tr>
                <td>B-, Bb,  Gm</td><td>b-, e-</td>
              </tr>
              <tr>
                <td>E-, Eb,  Cm</td><td>b-, e-, a-</td>
              </tr>
              <tr>
                <td>A-, Ab,  Fm</td><td>b-, e-, a-, d-</td>
              </tr>
              <tr>
                <td>D-, Db,  B-m, Bbm</td><td>b-, e-, a-, d-, g-</td>
              </tr>
              <tr>
                <td>G-, Gb,  E-m, Ebm</td><td>b-, e-, a-, d-, g-, c-</td>
              </tr>
              <tr>
                <td>C-, Cb,  A-m, Abm</td><td>b-, e-, a-, d-, g-, c-, f-</td>
              </tr>
            </tbody></table>
            Or, specify the key signitures spareted by comma.<br/>
            #SIGN{f+,g-,a-,b-};  // Whole tone scale
          </div>
        </div>
      </div>

      <h3>Macro definitions</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#[A-Z]=...;</td>
            <td class='range'>(MML text)</td>
            <td class='desc'>Define macro．Write '#ABCD=c;' or '#A-D=c;' to set macros A,B,C,D to 'c'.
<pre class='example'>
#A=cde;   l8AAgedAd;    // Expand as "l8cdecdegedcded"
</pre>
<pre class='example'>
#A-C=cde; l8ABgedCd;    // Expand as "l8cdecdegedcded"
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#[A-Z]+=...;</td>
            <td class='range'>(MML text)</td>
            <td class='desc'>Add text to macro．Write '#ABCD+=c;' or '#A-D+=c;' to add 'c' to macros A,B,C,D.
<pre class='example'>
#A=cde; #B=efg; #AB+=fg; l8AB;    // Expand as "l8cdefgefgfg"
</pre>
            </td>
          </tr>
        </tbody></table>
      </div>
      
      <h3>Table definitions</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#WAVB<i>n</i>{...};</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Define the wave shape by hex refer from SCC sound module (%4). The hex is expressed with unsigned char (-128=0x80, -1=0xff, 127=0x7f).
<pre class='example'>
#WAVB0{36454d4b41362f303639332309efd9cc362f220df2d9c8c3c6cbccc6bab0aeb7}; %4@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#WAV<i>n</i>{...}(formula...);</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Define the wave shape by array of numbers refer from SCC sound module (%4). The number of entries is 32, and the entrie are between -128 and 127. When the number of entries are less than 32, remains are filled up with 0.
<pre class='example'>
#WAV0{(0,127)8,(127,-128)16,(-128,0)8}; %4@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#WAVCOLOR/#WAVC<i>n</i>{...};</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Define the wave shape by wave color refer from SCC sound module (%4). The wave color is an unsigned int hex expressing 7 draw bars(from 8th to 1st) of Hammond organ by each 4bits. The 4 MSBs are the wave shape number.
<pre class='example'>
#WAVCOLOR0{08400f0f}; %4@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#TABLE<i>n</i>{...}(formula...);</td>
            <td class='range'>n;0 - 254</td>
            <td class='desc'>Define the envelop teble refer from the commands of @@,na,np,nt,nf,_@@,_na,_np,_nt and _nf. The range of entry is depended on the commands.
<pre class='example'>
#TABLE0{(64,0)5,(32,0)5,(16,0)5}; q8 na0 cde;
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>The format of #TABLEn{...}; and #WAVn{...};</div>
          <div>
            <ul>
              <li>Entries are separated by comma. <br/>ex) #TABLE0{0,2,4,6}</li>
              <li>Entries are continue with "|" position. <br/>ex) #TABLE0{0,2|4,6} // execute like (0,2,4,6,4,6,4,6...) </li>
              <li>Format '[]n' makes repeating inner numbers. <br/>例) #TABLE0{[0,1]3,2,3} (0,1,0,1,0,1,2,3) </li>
              <li>Format '(a)n' means repeats 'a' n times. <br/>ex) #TABLE0{(0)4} // same as #TABLE0{0,0,0,0}</li>
              <li>Format '(a,b)n' means interpolates the range of [a,b) with n numbers. The expansion DOES NOT include last number 'b'.<br/>ex) #TABLE0{(0,8)4} // same as #TABLE0{0,2,4,6}</li>
              <li>Format '(a,b,c,...)n' means interpolates the list of [a,b,c,...) with n numbers.<br/>例) #TABLE0{(0,6,3,9)9}  // same as #TABLE0{0,2,4,6,5,4,3,5,7}</li>
              <li>The numbers are rounded when they are interpolated. <br/>例) #TABLE0{(0,1,3)8} // same as #TABLE0{0,0,1,1,1,2,2,3}</li>
              <li>You can repeat, magnify and offset the entries with writing '[repeat]*[magnify]+[offset]' after {...}.<br/>Entries are rounded before calculations and the result is rounded again.<br/>
                <ul>
                  <li>#TABLE0{0,1,2,3}3 // same as #TABLE0{0,0,0,1,1,1,2,2,2,3,3,3}</li>
                  <li>#TABLE0{0,1,2,3}*2 // same as #TABLE0{0,2,4,6}</li>
                  <li>#TABLE0{0,1,2,3}+2 // same as #TABLE0{2,3,4,5}</li>
                  <li>#TABLE0{0,1,2,3}3*2-2 // same as #TABLE0{-2,-2,-2,0,0,0,2,2,2,4,4,4}</li>
                  <li>#TABLE0{(0,3)6}*5 // same as #TABLE0{0,5,5,10,10,15}</li>
                  <li>#TABLE0{(0,6)6}*0.5 // same as #TABLE0{0,1,1,2,2,3}</li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <h3>Parameters of FM sound module</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#@<i>n</i>{...}(sequence...);</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Write the parameters specifyed in @al,@fb and @ commands (Except for this command, you can specify decimal number in parameter 'multiple'. This dicimal number is corresponding to the 2nd argument of @ml command). The number of operators depends on the number of parameters, 1 operator for 18 parameters, 2ope for 33param, 3ope for 48param and 4ope for 63param. See also @al command.
<pre class='formula'>
#@0{
  alg[0-15], fb[0-7], fbc[0-3],
  (ws, ar, dr, sr, rr, sl, tl, ksr, ksl, mul, dt1, detune, ams, phase, fixedNote) x operator count
};
%6@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#OPL@<i>n</i>{...}(sequence...);</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Write the parameters of OPL3. The number of operators depends on the number of parameters, 1ope for 13param, 2ope for 24param, 2ope for 35param, 4ope for 46param. See also @al command about algorisms.
<pre class='formula'>
#OPL@0{
  alg[0-3], fb[0-7], 
  (ws[0-7], ar[0-15], dr[0-15], rr[0-15], egt[0,1], sl[0-15], tl[0-63], ksr[0,1], ksl[0-3], mul[0-15], ams[0-3]) x operator count
};
%6@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#OPM@<i>n</i>{...}(sequence...);</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Write the parameters of OPM. The number of operators depends on the number of parameters, 1ope for 13param, 2ope for 24param, 2ope for 35param, 4ope for 46param. See also @al command about algorisms. 
<pre class='formula'>
#OPM@0{
  alg[0-7], fb[0-7], 
  (ar[0-31], dr[0-31], sr[0-31], rr[0-15], sl[0-15], tl[0-127], ks[0-3], mul[0-15], dt1[0-7], dt2[0-3], ams[0-3]) x operator count
};
%6@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#OPN@<i>n</i>{...}(sequence...);</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Write the parameters of OPNA. The number of operators depends on the number of parameters, 1ope for 12param, 2ope for 22param, 2ope for 32param, 4ope for 46param. See also @al command about algorisms. 
<pre class='formula'>
#OPN@0{
  alg[0-7], fb[0-7], 
  (ar[0-31], dr[0-31], sr[0-31], rr[0-15], sl[0-15], tl[0-127], ks[0-3], mul[0-15], dt1[0-7], ams[0-3]) x operator count
};
%6@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#OPX@<i>n</i>{...}(sequence...);</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Write the parameters of OPX. The number of operators depends on the number of parameters, 1ope for 14param, 2ope for 26param, 2ope for 38param, 4ope for 50param. The range of alg depends on the number of operators. See also @al command about algorisms. 
<pre class='formula'>
#OPX@0{
  alg[0-15], fb[0-7], 
  (ws[0-7], ar[0-31], dr[0-31], sr[0-31], rr[0-15], sl[0-15], tl[0-127], ks[0-3], mul[0-15], dt1[0-7], detune[], ams[0-3]) x operator count
};
%6@0 cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>#MA@<i>n</i>{...}(sequence...);</td>
            <td class='range'>n;0 - 255</td>
            <td class='desc'>Write the parameters of MA3. The number of operators depends on the number of parameters, 1ope for 14param, 2ope for 26param, 2ope for 38param, 4ope for 50param. The range of alg depends on the number of operators. See also @al command about algorisms. 
<pre class='formula'>
#MA@0{
  alg[0-7], fb[0-7], 
  (ws[0-31], ar[0-15], dr[0-15], sr[0-15], rr[0-15], sl[0-15], tl[0-63], ksr[0,1], ksl[0-3], mul[0-15], dt1[0-7], ams[0-3]) x operator count
};
%6@0 cde;
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>How to define and refer the FM module parameters.</div>
          <div>
            Define the FM module parameter as above, and write as '%6@[0-255]' in mml sequence to the load the FM sound. <br/>
            In the definition of FM module parameters, letters other than digits are recognized as a separator (The comma, space and tab is recommended for a separator due to readability).
            And the MML sequence after "{...}" block is executed when '%6@[0-255]' commands are called in MML sequences (see below example), however note commands(c,d,e,f,g,a,b,r) and tone commands(%,@) can not be included in it.
<pre class='example'>
// Modify filter and quantize settings when change tone in a sequence.
#@0{ 8,  0,  0;
16, 40,  0, 34, 34,  0, 13, 1, 0, 1, 0,  0, 0, 0, 0;
 1, 34, 28,  0,  0, 15, 35, 1, 0, 2, 0,  0, 0, 0, 0;
 4, 63, 63,  0,  0,  0, 42, 1, 0, 5, 0,  0, 0, 0, 0;
 0, 36,  0,  0, 34,  0,  0, 1, 0, 1, 0, -3, 0, 0, 0;
} @f96,2,32,72q4;

%6@0 cdefedc;
</pre>
          </div>
        </div>
      </div>

      <h3>Parameters of PCM sound module</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state' style='width:160px;'>Statement</th>
            <th class='range' style='width:240px;'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#SAMPLER<i>n</i>{<i>waveID, oneShotFlag, pan, channelCount, startPoint, endPoint, loopPoint</i>};</td>
            <td class='range'>n;0 - 127<br/>waveID;String<br/>oneShotFlag;0,1(0)<br/>pan;-64~64(0)<br/>channelCount;1,2(2)<br/>startPoint;Number(-1)<br/>endPoint;Number(-1)<br/>loopPoint;Number(-1)</td>
            <td class='desc'>Specify note number of this sample by n, and specify id string by waveID. When oneShotFlag is 1, the sound does not stop by gate time. The pan sets panning of this sample, The channelCount sets stereo or monoral. Refer the appendex about startPoint, endPoint and loopPoint.</td>
          </tr>
        </tbody></table>
        <table><tbody>
          <tr>
            <th class='state' style='width:160px;'>Statement</th>
            <th class='range' style='width:240px;'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#PCMWAVE<i>n</i>{<i>waveID, samplingNote, keyRangeFrom, keyRangeTo, channelCount, startPoint, endPoint, loopPoint</i>};</td>
            <td class='range'>n;0 - 255<br/>waveID;String<br/>samplingNote;0,1(0)<br/>keyRangeFrom;0~127(0)<br/>keyRangeTo;0~127(127)<br/>channelCount;1,2(2)<br/>startPoint;Number(-1)<br/>startPoint;Number(-1)<br/>loopPoint;Number(-1)</td>
            <td class='desc'>Specify PCM voice number by n, and specify id string by waveID. The samplingNote sets sampling point, keyRangeFrom and keyRangeTo set keyboard range of this wave. The channelCount sets stereo or monoral. Refer the appendex about startPoint, endPoint and loopPoint.</td>
          </tr>
        </tbody></table>
        <table><tbody>
          <tr>
            <th class='state' style='width:160px;'>Statement</th>
            <th class='range' style='width:240px;'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#PCMVOICE<i>n</i>{<i>volumeCenterNote, volumeKeyRange, volumeRange, panCenterNote, panKeyRange, panRange, ar, dr, sr, rr, sl</i>};</td>
            <td class='range'>n;0 - 255<br/>volumeCenterNote;0-127(4)<br/>volumeKeyRange;0-127(0)<br/>volumeRange;-128~128(0)<br/>panCenterNote;0-127(64)<br/>panKeyRange;0-127(0)<br/>panRange;-128~128<br/>ar;0~63<br/>dr;0~63<br/>sr;0~63<br/>rr;0~63<br/>sl;0~15</td>
            <td class='desc'>Specify PCM voice number by n, and changing rate of volume and panning by note number. And last 5 arguments set envelope. See appendex.</td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>Setting of PCM samples playing position</div>
          <div>
            #SAMPLER and #PCMWAVE set playing position by startPoint, endPoint and loopPoint. These values are in sample count. SiON can detect and skip the silence at head and tail of mp3 file.
            <ul>
              <li>The startPoint sets starting position. Specify -1 to set starting point with skipping head silence. </li>
              <li>The endPoint sets ending position. The negative value sets endPoint by the sample count from tail.</li>
              <li>The loopPoint sets returning position by looping. Specify -1 for no-loop. Specify 0 (or less than startPoint) to set loopPoint to startPoint. The negative value sets loopPoint by the sample count from tail.</li>
            </ul>
            You cannot specify loopPoint less than startPoint. Use @ph command for that purpose.
          </div>
        </div>
        <div class='appendex'>
          <div class='title'>Parameters of #PCMVOICE</div>
          <div>
            #PCMVOICE sets the changing rate of volume and panning by note number. The negative value of volumeRange and panRange sets opsitte direction of slope.
            <img src='./image/pcmvolume.png' alt='pcm volume parameters' title='pcm volume parameters'/>
            <img src='./image/pcmpan.png' alt='pcm panning parameters' title='pcm panning parameters'/>
          </div>
        </div>
      </div>

      <h3>FM Channels Connecttion</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#FM{...};</td>
            <td class='range'>(formula)</td>
            <td class='desc'>Connect channels after this command (see also @i,@o commands). Following sequences are indexed alphabetically and discribe the connections by "+"(mixing) and "(...)"(modulating).<br/>
            Write 'An(B)' to connect A frequency modulated by B (n(0-7);degree of modulation，default as n=5(this value is same modulation as an OPM does)), and 'A+B' to mix A and B, (You can abbreviate '+'). So 'A(B+C)' means A modulated by mixed output of B and C.
<pre class='example'>
#FM{B3(A)}; %5q8s63cde; %5q2cde;   // same as "@o1%5q8s63cde; @i3%5q2cde;"
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>Difference between emulated FM module(%6@n) and FM Channel Connecttion(#FM)</div>
          <div>
            In FM Channel Connecttion command, 
            <ul>
              <li>you can play differnet sequence for each FM connected channels.</li>
              <li>you can use the output after filtering by LP-Filter as FM modulator.</li>
              <li>you can use the ring modulation.</li>
              <li>you can apply differnet LFO and differnet table envelops for each FM connected channels.</li>
            </ul>
            On the other hand in emulated FM module,
            <ul>
              <li>you can connect feedback output from chosen operator (multi-operater feedback like an OPX).</li>
              <li>of course you can play one sequence for all operators.</li>
              <li>Light weighted (especialy with LFO).</li>
            </ul>
            You can connect emulated FM module channels by @o, @i and #FM commands. In this case, operator#0 of carrier channel is modulated by the output of modulator channel.
          </div>
        </div>
      </div>

      <h3>Effector Settings</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>#EFFECT<i>n</i>{...};</td>
            <td class='range'>(MML for effector)</td>
            <td class='desc'>Connect effector to specifyed slot. The value of n=0 is for master effect.
<pre class='example'>
// Connect LPF->delay to Slot1．EffectSendLevel=32．
#EFFECT1{lf3000delay300,32,1}; @v64,32q0cder;
</pre>
<pre class='example'>
// Slot0 is the master effect. Effects final output.
#EFFECT0{autopan}; q0$cdefed;
</pre>
<pre class='example'>
// Slot1 output is connected to Slot2 by send_level of 64.
#EFFECT1{dist}@v128,64;#EFFECT2{delay}; %11@v0,32 cder;
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>the MML for effector</div>
          <div>
            When you connect effectors by #EFFECT system command, you should use the MML for effectors (see following reference).<br/>
            SiON MML allows to write "p", "@p", "@v" commands after "#EFFECT{}" (except for master slot), and you can specify the panning("p","@p") and mixing level("@v"/default at 128) for effector slot.<br/>
            Otherwise, the arguments of "@v" commands specifies not only mixing level but also effect send level to following effector slots. For example, write "#EFFECT2{...}@v96,64,32;" in slot2, mixing level of slot2 is 96, send level to slot3 is 64 and send level to slot4 is 32.You can specify send level only to following effector slots.
          </div>
          <div>
            <table><tbody>
              <tr>
                <th class='state' style='width:160px;'>Statement</th>
                <th class='range' style='width:240px;'>Range</th>
                <th class='desc'>Description</th>
              </tr>
              <tr>
                <td class='state'>eq<i>lg,mg,hg,lf,hf</i></td>
                <td class='range'>lg;Low gain[%](100)<br/>mg;Middle gain[%](100)<br/>hg;High gain[%](100)<br/>lf;Low freq.[Hz](800)<br/>hf;High freq.[Hz](5000)</td>
                <td class='desc'><b>3Band <u>EQ</u>ualizer</b></td>
              </tr>
              <tr>
                <td class='state'>ws<i>dist,level</i></td>
                <td class='range'>dist;Distortion[](50)<br/>level;Output level[%](100)</td>
                <td class='desc'><b><u>W</u>ave <u>S</u>haper</b></td>
              </tr>
              <tr>
                <td class='state'>delay<i>time,fb,cross,wet</i></td>
                <td class='range'>time;Delay time[ms](200)<br/>fb;Feedback[%](25)<br/>cross;Stereo channel crossing(0)<br/>wet;wet level[%](100)</td>
                <td class='desc'><b><u>DELAY</u></td>
              </tr>
              <tr>
                <td class='state'>reverb<i>dly1,dly2,fb,wet</i></td>
                <td class='range'>dly1;Long delay time[%](70)<br/>dly1;Short delay time[%](40)<br/>fb;Feedback[%](80)<br/>wet;wet level[%](100)</td>
                <td class='desc'><b><u>REVERB</u></td>
              </tr>
              <tr>
                <td class='state'>chorus<i>time,fb,depth,wet</i></td>
                <td class='range'>time;Delay time[ms](20)<br/>fb;Feedback[%](50)<br/>depth;Depth[](200)<br/>wet;wet level[%](100)</td>
                <td class='desc'><b><u>CHORUS</u></td>
              </tr>
              <tr>
                <td class='state'>dist<i>pre,post,lpf,slope</i></td>
                <td class='range'>pre;PreGain[dB](-60)<br/>post;PostGain[dB](-12)<br/>lpf;LPF Freq[Hz](2400)<br/>slope;LPF Slope[oct](1)</td>
                <td class='desc'><b><u>DIST</u>ortion</td>
              </tr>
              <tr>
                <td class='state'>comp<i>thres,wnd,ar,rr,gain,level</i></td>
                <td class='range'>thres;Threshold[%](70)<br/>wnd;Window Width[ms](50)<br/>ar;Attack[ms](20)<br/>rr;Release[ms](20)<br/>gain;Max gain[db](6)<br/>level;output level[%](50)</td>
                <td class='desc'><b><u>COMP</u>ressor</td>
              </tr>
              <tr>
                <td class='state'>autopan<i>freq,depth</i></td>
                <td class='range'>freq;Frequency[Hz](1)<br/>depth;Panning width[%](100)</td>
                <td class='desc'><b><u>AUTOPAN</u></td>
              </tr>
              <tr>
                <td class='state'>stereo<i>wide,pan,phase</i></td>
                <td class='range'>wide;enhancement[%](140)<br/>pan;Panning(0)<br/>phase;Phase invert(0)</td>
                <td class='desc'><b><u>STEREO</u> enhancer</td>
              </tr>
              <tr>
                <td class='state'>ds<i>freq, bits, ch</i></td>
                <td class='range'>freq ; Freq.Shift(0)<br/>bits ; bit ratio(16)<br/>ch ; channel count(2)</td>
                <td class='desc'><b><u>D</u>own <u>S</u>ampler. Freq.Shift=0 sets 44.1kHz, 1 sets 22.05kHz, 2 sets 11.02kHz ...</td>
              </tr>
              <tr>
                <td class='state'>speaker<i>hardness</i></td>
                <td class='range'>hardness ; diaphragm hardness[%](10)</td>
                <td class='desc'><b><u>SPEAKER</u> simulator</td>
              </tr>
              <tr>
                <td class='state'>lf<i>freq,band</i></td>
                <td class='range'>freq;Frequency[Hz](800)<br/>band;band width[oct](1)</td>
                <td class='desc'><b><u>L</u>ow pass <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>hf<i>freq,band</i></td>
                <td class='range'>freq;Frequency[Hz](5000)<br/>band;band width[oct](1)</td>
                <td class='desc'><b><u>H</u>igh pass <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>bf<i>freq,band</i></td>
                <td class='range'>freq;Frequency[Hz](3000)<br/>band;band width[oct](1)</td>
                <td class='desc'><b><u>B</u>and pass <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>nf<i>freq,band</i></td>
                <td class='range'>freq;Frequency[Hz](3000)<br/>band;band width[oct](1)</td>
                <td class='desc'><b><u>N</u>otch (band stop) <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>pf<i>freq,band</i></td>
                <td class='range'>freq;Frequency[Hz](3000)<br/>band;band width[oct](1)</td>
                <td class='desc'><b><u>P</u>eaking <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>af<i>freq,band</i></td>
                <td class='range'>freq;Frequency[Hz](3000)<br/>band;band width[oct](1)</td>
                <td class='desc'><b><u>A</u>ll pass <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>lb<i>freq,slope,gain</i></td>
                <td class='range'>freq;Frequency[Hz](3000)<br/>slope;slope[oct](1)<br/>gain;gain[dB](6)</td>
                <td class='desc'><b><u>L</u>ow <u>B</u>ooster</td>
              </tr>
              <tr>
                <td class='state'>hb<i>freq,slope,gain</i></td>
                <td class='range'>freq;Frequency[Hz](5500)<br/>slope;slope[oct](1)<br/>gain;gain[dB](6)</td>
                <td class='desc'><b><u>H</u>igh <u>B</u>ooster</td>
              </tr>
              <tr>
                <td class='state'>nlf<i>cut,res</i></td>
                <td class='range'>cut;cutoff table index(255)<br/>res;resonance table index(255)</td>
                <td class='desc'><b><u>EN</u>velope controlable <u>L</u>ow pass <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>nhf<i>cut,res</i></td>
                <td class='range'>cut;cutoff table index(255)<br/>res;resonance table index(255)</td>
                <td class='desc'><b><u>EN</u>velope controlable <u>H</u>igh pass <u>F</u>ilter</td>
              </tr>
              <tr>
                <td class='state'>vowel<i>out,f1,g1,f2,g2</i></td>
                <td class='range'>out;output[%](100)<br/>f1;1st freq.(800)<br/>g1;1st gain[dB](36)<br/>f2;2nd freq.(1300)<br/>g2;2nd gain[dB](24)</td>
                <td class='desc'><b><u>Vowel</u> filter</td>
              </tr>
            </tbody></table>
          </div>
        </div>
      </div>
    </div>



    <h2>MML commands</h2>
    <div class='section'>
      <h3>Sequence control commands</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>t<i>n</i></td>
            <td class='range'>1 - 511 (120)</td>
            <td class='desc'><b>(<u>T</u>empo)Specify BPM.</b>This command changes the BPM of all channels wherever this command is written in, initial/default value  is 120. In the 2nd repeat of '$' command, the 't' command is ignored. You can change the tempo in the repetition of "[]" command.
<pre class='example'>
t100cde t200cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>$</td>
            <td class='range'>&nbsp;</td>
            <td class='desc'><b>(segno)Repeat infinitely.</b>Repeat from this command point when the playing pointer achieves to the end of the sequence.
<pre class='example'>
l8 $cde;     // "cdecdecde..."(repeat infinitely)
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>[...|...]<i>n</i></td>
            <td class='range'>1 - 65535 (2)</td>
            <td class='desc'><b>(loop)Loop.</b>Specify repeating count at the end of '[...]'. Repeat 2 times when you omit the repeating count. When you write '|' command inside of loops '[...]'，the pointer skips a sequence after '|' command in the last repetition. You can specify the repeating count at both of the start '[' and the end ']', but the number at the end has priority. [Recommended] Specify the repeat count at the end except for some special cases.
<pre class='example'>
l8 [cd|e]3;   // "cdecdecd"
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@mask</td>
            <td class='range'>0 - 63 (0)</td>
            <td class='desc'><b>(event <u>MASK</u>)Ignore mask for the events．</b>Ignore some events after this command. initial/default value is 0 (see below appendex).
<pre class='example'>
@mask1 v1c;   // ignore "v1"
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>[A-Z]<br/>[A-Z](<i>n</i>)</td>
            <td class='range'>-128 - 127 (0)</td>
            <td class='desc'><b>Expand macro.</b>Expand the macro defined by "#[A-Z]". The expantion is note-shifted when you specify the argument after this command. The expansion way of the macro in macro is specifyed by '#MACRO{dynamic|static}' command.
<pre class='example'>
#A=cde; l8 AAA;         // expand as "cdecdecde"
</pre>
<pre class='example'>
#A=cde; l8 AA(2)A(-2);  // expand as "cdedef+&gt;b-&lt;cd"
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>// ...</td>
            <td class='range'>&nbsp;</td>
            <td class='desc'><b>Comment.</b>Ignore the text after '//'.
<pre class='example'>
// Comment
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>/* ... */</td>
            <td class='range'>&nbsp;</td>
            <td class='desc'><b>Multi-line comment.</b>gnore the text between '/*' and '*/'.
<pre class='example'>
/* Comment */
</pre>
            </td>
          </tr>
          <tr class='notrec'>
            <td class='state'>![<i>n</i>...!|...!]</td>
            <td class='range'>1 - 256 (2)</td>
            <td class='desc'>[NOT RECOMMENDED] You can expand the loop when its comiping. You cannot nest this loop and the maximum value of repitation is 256.</td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>the argument of '@mask' command.</div>
          <div>
            Specify a sum of below values you want to ignore.<br/>
            1; (Volume related) x,v,@v,(,)<br/>
            2; (Panning related) p,@p<br/>
            4; (Key off timing) q,@q<br/>
            8; (Operator settings) s,@,@al,@fb,@rr,@tl,@ml,@dt,@ph,@fx<br/>
            16;(Table envelops) @@,na,np,nt,nf,_@@,_na,_np,_nt,_nf<br/>
            32;(LFO modulations) ma,mp<br/>
          </div>
        </div>
      </div>
      
      <h3>Pitch related commands</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>[a-g][+#-]?<i>n</i></td>
            <td class='range'>1 - 1920 (default value is specifyed by "l" command)</td>
            <td class='desc'><b>(note)Specify notes.</b> From 'c' to 'b' are corresponding to the notes. Shaped by '+', '#'  and flated by '-' after these notes. You can specify the length of note by argument and apply the value specifyed by 'l' command when you abbreviate the paremeter. The '#SIGN' command makes shapes and flats in some notes.
<pre class='example'>
#SIGN{G}; cdef-gab&lt;c  // natural on 'f'.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>r<i>n</i></td>
            <td class='range'>1 - 1920 (default value is specifyed by "l" command)</td>
            <td class='desc'><b>(<u>R</u>est)Specify rest.</b> You can specify the length of note by argument. Same as notes.
<pre class='example'>
cder cder gedcdedr;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>o<i>n</i></td>
            <td class='range'>0 - 9 (5)</td>
            <td class='desc'><b>(<u>O</u>ctave)Specify octave.</b> The center frequency 440kHz is 'o5a'. The initial/default value is 5．
<pre class='example'>
o4[co5c]  // plays 'o4c o5c o4c o5c'. the 'o' command is little strange at the entry of the loop.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>[&lt;&gt;]<i>n</i></td>
            <td class='range'>1 - 9 (1)</td>
            <td class='desc'><b>(octave shift)Increment/decrement octave value.</b> '&lt;' increments octave and '&gt;' decrements octave in the default setting. The meaning is inverted when '#REV' command appears. This command is ignored when the octave is out of range(0-9).
<pre class='example'>
o4c&lt;c&lt;c  // plays 'o4c o5c o6c'
</pre>
<pre class='example'>
o4[c&lt;c]  // plays 'o4c o5c o4c o5c'. the '&lt;' command is also strange at the entry of the loop.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>k<i>n</i></td>
            <td class='range'>-8192 - 8191 (0)</td>
            <td class='desc'><b>(<u>K</u>ey detune)Key detune. </b>The unit of argument is a halftone divided by 64. The initial/default value is 0．
<pre class='example'>
k-2cde; k2cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>kt<i>n</i></td>
            <td class='range'>-128 - 127 (0)</td>
            <td class='desc'><b>(<u>K</u>ey <u>T</u>ranspose)Key transpose. </b>The unit of argument is a halftone. The initial/default value is 0.
<pre class='example'>
cde; kt7cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>*</td>
            <td class='range'>&nbsp;</td>
            <td class='desc'><b>(pitch bend)Pitch bending. </b>This command makes intergradation between two notes.
<pre class='example'>
c*&lt;c;  // pitch intergradation for 1 octave
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>po<i>n</i></td>
            <td class='range'>0-</td>
            <td class='desc'><b>(<u>PO</u>rtament)Portament. </b>This command makes intergradation between two notes connected by slur. The stating timing of intergradation is different from pitch bending, it starts at 2nd notes attack. The argument sets intergradation term in frames. The initial/default value is 0.
<pre class='example'>
po6l8c&g&f&<c>b&&ag&&fe&d&c4;  // portament on notes with slur.
</pre>
            </td>
          </tr>
          <tr class='notrec'>
            <td class='state'>!@kr<i>n</i></td>
            <td class='range'>-8192 - 8191 (0)</td>
            <td class='desc'>[NOT RECOMMENDED] (Key detune Relative)Relative key detune.</td>
          </tr>
          <tr class='notrec'>
            <td class='state'>!@ns<i>n</i></td>
            <td class='range'>-128 - 127 (0)</td>
            <td class='desc'>[NOT RECOMMENDED] (Note Shift)Relative key transpose.</td>
          </tr>
        </tbody></table>
      </div>
      
      <h3>Length related commands</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>l<i>n</i></td>
            <td class='range'>1 - 1920 (4)</td>
            <td class='desc'><b>(<u>L</u>ength)Specify default value of note/rest length．</b>'l1' means whole, 'l4' means quarter, 'l16' means 16th. The initial/defanult value is 4.
<pre class='example'>
cder l8cder l16cder;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>^<i>n</i></td>
            <td class='range'>1 - 1920 (default value is specifyed by "l" command)</td>
            <td class='desc'><b>(extension)Extension of note length. </b>Increment note/rest/l commands argument. The default value is specifyed by "l" command.
<pre class='example'>
c4^16;  // play c with a length of 'quarter + 16th'
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>q<i>n</i></td>
            <td class='range'>0 - 8 (6)</td>
            <td class='desc'><b>(<u>Q</u>uantize) Quantize.</b>Specify the timing of key-off. 'q0' sets key-off at the timing of key-on. 'q4' sets key-off timing at the half length. 'q8' sets no key-off. The initial/default value is 6.
<pre class='example'>
q0cr q4cr q8cr;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@q<i>n1</i>,<i>n2</i></td>
            <td class='range'> 0 - 192 (0)</td>
            <td class='desc'><b>(<u>A</u>bsolute <u>Q</u>uantize)Quantize specifyed by the absolute value/The dekay of key-on timing.</b> The 1st argument sets key-off timing by the absolute value (The unit is a whole note divided by 192). The 2nd argument delays the timing of key-on. The initial/default value is 0. [SPECIFICATIONS]When the slur command appears with a setting of [key-on delay]>0, SiOPM ignore the key-on delay of the 1st note and the slur of the 2nd note.
<pre class='example'>
q8 @q48cr @q24cr @q0cr;  // same as "q0cr q4cr q8cr"
</pre>
<pre class='example'>
q8 @q,24 o5c2c2; q0 l8o4[8c]; // The timing of key-on delays 8th.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>&amp;</td>
            <td class='range'>&nbsp;</td>
            <td class='desc'><b>(slur)Slur.</b> This command ignores the key-off, so the next note is played smoothly. The envelop and wave phase is NOT reset at the beginning of 2nd note.
<pre class='example'>
cd&amp;e; // No key-off between "d" and "e"
</pre>
<pre class='example'>
c&amp;c;   // No phase reset, so the boundary cannot be recognized.
</pre>
<pre class='example'>
#TABLE0{(0,128)90};na0 c&amp;d&amp;e;   // No envelop reset.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>&amp;&amp;</td>
            <td class='range'>&nbsp;</td>
            <td class='desc'><b>(weak slur)Weak slur. </b>This command ignores the key-off. The envelop and wave phase is reset at the beginning of 2nd note.
<pre class='example'>
c&amp;&amp;c; // Phase reset at the beginning of 2nd note, so the boundary can be recognized.
</pre>
<pre class='example'>
#TABLE0{(0,128)90};na0 c&amp;&amp;d&amp;&amp;e;   // The envelop reset at the beginning of 2nd note.
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>The formula for key-on length</div>
          <div>
            The 'q' and '@q' commands are independent for the key-on length. the negative value of [key-on length] set 0.<br/>
            [key-on length] = [length of note/rest] x [argument of 'q'] / 8 - ([1st argument of '@q'] + [2nd argument of '@q'])
          </div>
        </div>
      </div>
      
      <h3>Volume related commands</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>v<i>n</i></td>
            <td class='range'>0 - 32 (16)</td>
            <td class='desc'><b>(<u>V</u>olume)Volume.</b> 'v0' makes silent and 'v16' sets at the maximum. 'v16-32' makes wave shape distorted. The inital/default value is 16.
<pre class='example'>
%5 v4c v8c v12c v16c v20c v24c v28c v32c;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>[()]<i>n</i></td>
            <td class='range'>1 - 32 (1)</td>
            <td class='desc'><b>(volume shift)Increment/decrement volume.</b> '(' increments volume and ')' decrements volume at the default setting. The meaning is inverted when '#REV' command appears. This command is ignored when the volume is out of range(0-32).
<pre class='example'>
v1l8 c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c)4c)4c)4c)4c;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>x<i>n</i></td>
            <td class='range'>0 - 128 (128)</td>
            <td class='desc'><b>(e<u>X</u>pression)Expression.</b> The initial/default value is 128. 'x0' makes silent and 'x128' sets at the maximum. The table envelop commands for expression (na,_na) overwrite this value, so the value specifyed by this command is ignored when the 'na' or '_na' appears.
<pre class='example'>
v8 x32c x64c x96c x128c v4 x32c x64c x96c x128c;  // "v" and "x" are independent. see below appendex.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>%v<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1=0 - 4(0)<br/>n2=0 - 7(4)</td>
            <td class='desc'><b>(<u>V</u>olume setting)Volume setting．</b>The 1st argument represents scaling mode, 0=linear, 1-4=non-linear(log scale, dynamic range of 96dB,64dB,48dB,32dB respectively. The 2nd argument represents maximum value of 'v' command as (256>>[n2]). default value = 4 (means v max@16). This setting is applyed also on volume shift command.
<pre class='example'>
%v3,1 v128c v96c v64c v32c;  // non-linear scale(dr=48dB)，v command max@128
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>%x<i>n</i></td>
            <td class='range'>0 - 4(0)</td>
            <td class='desc'><b>(e<u>X</u>pression setting)Expression setting．</b>The argument represents scaling mode, 0=linear, 1-4=non-linear(log scale, dynamic range of 96dB,64dB,48dB,32dB respectively. This scale is applyed also on table envelop.
<pre class='example'>
%x1 x128c x120c x112c x104c;  // non-linear scale(dr=96dB)
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@v<i>n1</i>,...<i>n8</i></td>
            <td class='range'>0 - 128 (n1=64/n2-n8=0)</td>
            <td class='desc'><b>(m<u>@</u>ster <u>V</u>olume)Master volume and effect send level.</b> The initial/default value is 64 for n1 and 0 for others. The n1 sets the master volume of this channel, and n2-n8 sets effect send level to the #EFFECT slot. The n1 value is also independent from 'v' and 'x' values.
<pre class='example'>
@v64 v4c v8c v12c v16c @v32 v4c v8c v12c v16c;  // "@v" and "v" (and "x") are independent. see below appendex.
</pre>
<pre class='example'>
#EFFECT1{chorus}; @v64,32 cde;  // [effect send]=32 for effect slot #1 (chorus) 
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>p<i>n</i></td>
            <td class='range'>0 - 8 (4)</td>
            <td class='desc'><b>(<u>P</u>anning)Panning.</b> 'p0' sets output left only, 'p4' centers panning, 'p8' sets output right only. The initial/default value is 4.<br/>[Argument of '@p'] = ([Argument of 'p'] - 4) x 16.
<pre class='example'>
p0c p2c p4c p6c p8c;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@p<i>n</i></td>
            <td class='range'>-64 - 64 (0)</td>
            <td class='desc'><b>(fine <u>P</u>anning)Fine panning.</b> '@p-64' sets output left only, '@p0' centers panning, '@p64' sets output right only. The initial/default value is 0.
<pre class='example'>
@p-64c @p-32c @p0c @p32c @p64c; // same as above
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>The formula for output</div>
          <div>
            [Monoral output] = ([Argument of 'v'] / 16) x ([Argument of 'x'] / 128)<br/>
            [Stereo left output]  = [Monoral output] x ([Argument of '@v'] / 128) x cos(([Argument of '@p'] + 64) / 128 x PI/2)<br/>
            [Stereo Right output] = [Monoral output] x ([Argument of '@v'] / 128) x sin(([Argument of '@p'] + 64) / 128 x PI/2)<br/>
            The monoral output is used for the bus pipe specifyed by "@o" and the input for "%e", so "@v" and "@p" are ignored in these situation.<br/>
          </div>
        </div>
      </div>

      <h3>Tone color related commands</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>%<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 9 (0)<br/>n2; 0 - 7 (0)</td>
            <td class='desc'><b>(module)Select sound module.</b> The sound module type specifies on the 1st argument and the channel number specifies on the 2nd argument. This command changes the meanings of '@' commands 1st argument.
<pre class='example'>
%0c %1c %2c %3c;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@<i>n1</i>,...<i>n15</i></td>
            <td class='range'>n1; 0 - 1023 (0)</td>
            <td class='desc'><b>(tone)Select/Modify tone color.</b> Select tone color and modify operator settings. This command has 15 arguments(can be abbreviated, see below appendex). The meaning of 1st argument depends on sound module type(1st argument of "%").
<pre class='example'>
%5 @0c @1c @2c @3c @4c @5c @6c @7c; // select wave shape by 1st argument
</pre>
<pre class='example'>
@0,32,28,28,28,2,0 cde;   // modify envelop by 2nd-7th arguments.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@f<i>n1</i>,...<i>n10</i></td>
            <td class='range'>n1; 0 - 128 (128)<br/>n2; 0 - 9 (0)</td>
            <td class='desc'><b>(<u>F</u>ilter)Modify filter.</b> Modify the filter and its envelop. The 1st argument sets cut-off and the 2nd argument sets resonance. This command has 10 arguments(can be abbreviated, see below appendex).
<pre class='example'>
%2 @f64,3 q0 c;   // noise with LPF(cutoff=64, resonance=3)
</pre>
<pre class='example'>
@f0,2,32,32,32 cde;    // filter envelop specifyed by 3rd-10th arguments
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>%f<i>n</i></td>
            <td class='range'>n; 0,1,2 (0)</td>
            <td class='desc'><b>(<u>F</u>ilter)Filter mode. </b>0=low-pass, 1=band-pass，2=high-pass filter for envelop.
<pre class='example'>
%f2 @f96 cde;   // high pass filter
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>s<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 63 (28)<br/>n2; -256 - 255 (0)</td>
            <td class='desc'><b>(<u>S</u>ustain sweep)Modify release rate.</b> The 1st argument sets the release rate of final carrior operator. The 2nd argument sets pitch sweeping after key-off.<br/>[Pitch sweep speed[halftone/frame]] = [2nd argument] / 21
<pre class='example'>
q4 s63cr s32cr s24cr s20cr s12cr;
</pre>
<pre class='example'>
q4 s28,-32cde;    // pitch sweep after key-off
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@al<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 1 - 4 (1)<br/>n2; 0 - 15 (0)</td>
            <td class='desc'><b>(<u>AL</u>gorism)Select connecting algorism.</b> The 1st argument sets the number of operators, the 2nd argument sets connecting algorism (see below appendex). The initial number of operator is 1. In this case the output is simple wave (not frequency modulated). This command initializes all settings of all operators. The default value of 2nd argument is the parallel connecting argorism (2ope;alg=1, 3ope;alg=5, 4ope;alg=7).
<pre class='example'>
%5 @al2,0 cde;  // 2ope frequency modulating connection [o1(o0)]
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@fb<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 7 (0)<br/>n2; 0 - 3 (0)</td>
            <td class='desc'><b>(<u>F</u>eed<u>B</u>ack)Modify feedback connection.</b> The 1st argument sets feedback，the 2nd argument sets the index of operator feedback from (If you want multi-operator feedback like OPX, specify 2nd argument).
<pre class='example'>
%5 @al2,0 @fb5,1 cde;  // feedback from 2nd operator [o1(o0(o1))]
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>i<i>n</i></td>
            <td class='range'>0 - 3 (last operators index)</td>
            <td class='desc'><b>(operator <u>I</u>ndex)Select operator to modify.</b> This command chooses a operator for '@','@rr','@tl','@ml','@dt','@ph','@fx' and '@se' commands.
<pre class='example'>
%5 @al2 i0@0 i1@1 cde;   // The operator#0 outputs sin wave and the operator#1 outputs saw wave.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@rr<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1;0 - 63 (28)<br/>n2;-256 - 255 (0)</td>
            <td class='desc'><b>(@ <u>R</u>elease <u>R</u>ate)Same as 5th argument of '@' command.</b>The 2nd argument sets pitch sweep after key-off (same as 2nd argument of 's').</td>
          </tr>
          <tr>
            <td class='state'>@tl<i>n</i></td>
            <td class='range'>0 - 127 (0)</td>
            <td class='desc'><b>(@ <u>T</u>otal <u>L</u>evel)Same as 7th argument of '@' command.</b></td>
          </tr>
          <tr>
            <td class='state'>@ml<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1;0 - 15 (1)<br/>n2;-128 - 127 (0)</td>
            <td class='desc'><b>(@ <u>M</u>u<u>L</u>tiple)Same as 10th argument of '@' command.</b>The 2nd argument sets non-integral harmonics. <br/>[frequency ratio] = [1st argument(In the case of "0"->0.5)] + [2nd argument] / 128</td>
          </tr>
          <tr>
            <td class='state'>@dt<i>n</i></td>
            <td class='range'>-8192 - 8191 (0)</td>
            <td class='desc'><b>(@ <u>D</u>e<u>T</u>une)Same as 12th argument of '@' command.</b>'k' modifies all operators, and '@dt' modifies only one operator specifyed by 'i'.</td>
          </tr>
          <tr>
            <td class='state'>@ph<i>n</i></td>
            <td class='range'>-1 - 255 (0)</td>
            <td class='desc'><b>(@ <u>PH</u>ase)Same as 14th argument of '@' command.</b></td>
          </tr>
          <tr>
            <td class='state'>@fx<i>n</i></td>
            <td class='range'>0 - 127 (0)</td>
            <td class='desc'><b>(@ <u>F</u>i<u>X</u>ed note)Same as 15th argument of '@' command.</b></td>
          </tr>
          <tr>
            <td class='state'>@se<i>n</i></td>
            <td class='range'>0 - 17 (0)</td>
            <td class='desc'><b>(@ <u>S</u>SG <u>E</u>nvelpe control)Emulate SSGEC Register of OPNA.</b>The argument of 16 and 17 are extension of SiOPM. 16;Argument=8 with same gain repetition, 17;Argument=12 with same gain repetition.</td>
          </tr>
          <tr>
            <td class='state'>@er<i>n</i></td>
            <td class='range'>0 , 1</td>
            <td class='desc'><b>(@ <u>E</u>nvelop <u>R</u>eset)Envelop reset.</b>The argument of 1 sets envelop to bottom at the begin of attack. This parameter sets all operators.</td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>The 1st argument of '%' and '@'</div>
          <div>
            Select sound module type by 1st argument of '%', and select tone color index by 1st argument of '@'. The index of tone color depends on selected module type.<br/>(*click index to play sample sound.)
            <table><tbody>
              <tr>
                <th width='120'>1st argument of '%'</th>
                <th>1st argument of '@'</th>
              </tr>
              <tr>
                <td>'%0' PSG</td>
                <td><b>Emulation for AY-3-8910/SN76489.</b> The pitch is also PSG emulated (poor pitch for high note/narrow pitch range). @0-2 is available.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0: <span class='mml'>%0@0cde</span></td><td>Square wave</td></tr>
                    <tr><td class='tone'>@1: <span class='mml'>#TABLE0{(0,16)16};%0@1nt0,20q8o0c1^1^1</span></td><td>Pulse Noise(o0c - o2g+ are the NoisePeriod of 0-31 respectively.)</td></tr>
                    <tr><td class='tone'>@2: <span class='mml'>%0@2cde</span></td><td>Periodic Noise of SN76489.</td><tr>
                   </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%1' NES</td>
                <td><b>Emulation for NES pAPU(2a03).</b> The pitch is also PSG emulated (poor pitch for high note/narrow pitch range). @0-11 is available.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0-7: <span class='mml'>#TABLE0{(0,8)8};%1@@0,20q8c1.</span></td><td>Duty changable square wave. [Duty]=[argument]x12.5%. '@0' sets output=-1(constant).</td></tr>
                    <tr><td class='tone'>@8: <span class='mml'>%1@8cde</span></td></td><td>NES traiangle wave (8bit quantized).</td></tr>
                    <tr><td class='tone'>@9: <span class='mml'>#TABLE0{(0,16)16};%1@9nt0,20q8o0c1^1^1</span></td><td>Pulse Noise(o0c - o1d+ are the NoisePeriod of 0-15 respectively.)</td><tr>
                    <tr><td class='tone'>@10: <span class='mml'>#TABLE0{(0,16)16};%1@10nt0,20q8o0c1^1^1</span></td><td>93bit Noise(o0c - o1d+ are NoisePeriod of 0-15 respectively.)</td></tr>
                    <tr><td class='tone'>@11: <span class='mml'></span></td><td>PCM. same as "%7@0"[NOT IMPLEMENTED]</td></tr>
                  </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%2' Noise</td>
                <td><b>Noise unit.</b> Select noise type by @0-15.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0: <span class='mml'>%2@0c</span></td><td>White Noise</td></tr>
                    <tr><td class='tone'>@1: <span class='mml'>%2@1c</span></td><td>Pulse Noise (2 values [1/-1] noise)</td></tr>
                    <tr><td class='tone'>@2: <span class='mml'>%2@2c</span></td><td>93bit Noise (Short noise from 15bit LFSR)</td></tr>
                    <tr><td class='tone'>@3: <span class='mml'>%2@3c</span></td><td>Hi-pass Noise (White Noise with high-pass filter)</td></tr>
                    <tr><td class='tone'>@4: <span class='mml'>%2@4c</span></td><td>PinkNoise(1/f noise)</td></tr>
                    <tr><td class='tone'>@5: <span class='mml'>%2@5c</span></td><td>128bit Noise (Short noise from 16bit LFSR)</td><tr>
                    <tr><td class='tone'>@6-7: <span class='mml'></span></td><td>(reserved)</td><tr>
                    <tr><td class='tone'>@8: <span class='mml'>%2@8cde</span></td><td>Periodic Noise (wave from rotate shifted 16bit LFSR)</td></tr>
                    <tr><td class='tone'>@9: <span class='mml'>%2@9cde</span></td><td>93bit Noise with pitch</td></tr>
                    <tr><td class='tone'>@10-15: <span class='mml'></span></td><td>(reserved)</td></tr>
                  </tbody></table>
                 </td>
              </tr>
              <tr>
                <td>'%3' MA3</td>
                <td><b>Wave shape from YMU762(MA3) (same as OPL3/OPX from @0 to @7).</b> Select wave shape by @0-31.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0: <span class='mml'>%3@0cde</span></td><td>sin(p)</td></tr>
                    <tr><td class='tone'>@1: <span class='mml'>%3@1cde</span></td><td>(p&lt;PI)?sin(p):0</td></tr>
                    <tr><td class='tone'>@2: <span class='mml'>%3@2cde</span></td><td>abs(sin(p))</td></tr>
                    <tr><td class='tone'>@3: <span class='mml'>%3@3cde</span></td><td>(p&lt;PI/2||(PI&lt;=p&amp;&p&lt;PI*3/2))?abs(sin(p)):0</td></tr>
                    <tr><td class='tone'>@4: <span class='mml'>%3@4cde</span></td><td>(p&lt;PI)?sin(2p):0</td></tr>
                    <tr><td class='tone'>@5: <span class='mml'>%3@5cde</span></td><td>(p&lt;PI)?abs(sin(2p)):0</td></tr>
                    <tr><td class='tone'>@8-13: <span class='mml'>#TABLE0{(0,6)6}+8;%3@@0,20q8c1</span></td><td>@0-7 waves modulated by double frequency triangle waves.</td></tr>
                    <tr><td class='tone'>@16-21: <span class='mml'>#TABLE0{(0,6)6}+16;%3@@0,20q8c1</span></td><td>All sins of @0-7 formula are changed into triangle wave function.</td></tr>
                    <tr><td class='tone'>@24-29: <span class='mml'>#TABLE0{(0,6)6}+24;%3@@0,20q8c1</span></td><td>All sins of @0-7 formula are changed into saw wave function.</td></tr>
                    <tr><td class='tone'>@6: <span class='mml'>%3@6cde</span></td><td>(p&lt;PI)?1:-1</td></tr>
                    <tr><td class='tone'>@14: <span class='mml'>%3@14cde</span></td><td>(p&lt;PI)?1:0</td></tr>
                    <tr><td class='tone'>@22: <span class='mml'>%3@22cde</span></td><td>(p&lt;PI/2||(PI&lt;=p&amp;&p&lt;PI*3/2))?1:0</td></tr>
                    <tr><td class='tone'>@30: <span class='mml'>%3@30cde</span></td><td>(p&lt;PI/2)?1:0</td></tr>
                    <tr><td class='tone'>@7: <span class='mml'>%3@7cde</span></td><td>(p&lt;PI*0.5)?1-sin(p):(p>PI*1.5)?-1-sin(p):0</td></tr>
                    <tr><td class='tone'>@15,23,31 : <span class='mml'></span></td><td>Same as %4@[0-2]</td></tr>
                  </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%4' WaveTable</td>
                <td><b>Emulation for KONAMI SCC chip.</b> Use wave shapes defined by #WAV, #WAVB. Select wave shape by @0-255.</td>
              </tr>
              <tr>
                <td>'%5' all</td>
                <td><b>All wave shapes.</b> Select wave shape by @0-511.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0: <span class='mml'>%5@0cde</span></td><td>Sin wave</td></tr>
                    <tr><td class='tone'>@1: <span class='mml'>%5@1cde</span></td><td>Upward saw wave</td></tr>
                    <tr><td class='tone'>@2: <span class='mml'>%5@2cde</span></td><td>Downward saw wave</td></tr>
                    <tr><td class='tone'>@3: <span class='mml'>%5@3cde</span></td><td>NES Triangle wave (8bit Quantized)</td></tr>
                    <tr><td class='tone'>@4: <span class='mml'>%5@4cde</span></td><td>Triangle wave</td></tr>
                    <tr><td class='tone'>@5: <span class='mml'>%5@5cde</span></td><td>Square wave</td></tr>
                    <tr><td class='tone'>@6: <span class='mml'>%5@6cde</span></td><td>White noise (same as @16)</td></tr>
                    <tr><td class='tone'>@7: <span class='mml'>%5@7cde</span></td><td>(reserved) ... ?</td></tr>
                    <tr><td class='tone'>@8: <span class='mml'>%5@8cde</span></td><td>Pseudo sync for lower freq. output = -p/2PI</td></tr>
                    <tr><td class='tone'>@9: <span class='mml'>%5@9cde</span></td><td>Pseudo sync for higher freq. output = p/2PI</td></tr>
                    <tr><td class='tone'>@10: <span class='mml'>%5@10cde</span></td><td>Offset. output = 1</td></tr>
                    <tr><td class='tone'>@11-15: <span class='mml'></span></td><td>(reserved)</td></tr>
                    <tr><td class='tone'>@16-31: <span class='mml'>#TABLE0{(16,32)16};%5@@0,20q8c1^1^1</span></td><td>Noise wave. same as %2@([argument]-16)</td></tr>
                    <tr><td class='tone'>@32-63: <span class='mml'>#TABLE0{(32,64)32};%5@@0,10q8c1^1^1</span></td><td>MA3 wave. same as %3@([argument]-32)</td></tr>
                    <tr><td class='tone'>@64-95: <span class='mml'>#TABLE0{(64,96)32};%5@@0,10q8c1^1^1</span></td><td>Pulse wave. same as %8@([argument]-64)</td></tr>
                    <tr><td class='tone'>@96-127: <span class='mml'></span></td><td>(reserved)</td></tr>
                    <tr><td class='tone'>@128-255: <span class='mml'>#TABLE0{(128,256)128};%5@@0,4q8c1^1^1^1</span></td><td>Ramp wave．same as %9@([argument]-128)</td></tr>
                    <tr><td class='tone'>@256-511: <span class='mml'></span></td><td>Wave table. same as %4@([argument]-256)</td></tr>
                  </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%6' FM</td>
                <td><b>Emulation for frequency modulation sound module.</b> Load setting defined by #@, #OPL@, #OPM@, #OPN@, #OPX@ and #MA@. Select voice by @0-255.</td>
              </tr>
              <tr>
                <td>'%7' PCM</td>
                <td><b>Sampling wave module.</b> Play mp3 data loaded internaly. Select bank by @0-255. 'o5a' is original frequency.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0(sample)<span class='mml'>%7@0l8c.c.gf.f.&lt;c&gt;rccgf.f.&lt;c</span></td><td>* The SWF loaded some mp3 data for demonstration.</td></tr>
                  </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%8' Pulse</td>
                <td><b>Pulse wave (duty changable square wave) unit.</b> Select duty ratio by @0-15 or @16-31.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0-15: <span class='mml'>#TABLE0{(0,16)16};%8@@0,20q8c1^1^1</span></td><td>Pulse with 2 states(-1/1). output = (p&lt;PI/8*[index])?1:-1;</td></tr>
                    <tr><td class='tone'>@16-31: <span class='mml'>#TABLE0{(16,32)16};%8@@0,20q8c1^1^1</span></td><td>Pulse with 3 states(-1/1/0). output = (p&lt;PI/16*([index]-16))?1:(p&lt;PI/8*([index]-16))?-1:0;</tr>
                  </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%9' Ramp</td>
                <td><b>Ramp wave. </b>Interplation of saw and triangle wave. @0=upward-saw -> @64=triangle -> @127=downward-saw
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0-63: <span class='mml'>#TABLE0{(0,64)64};%9@@0,2q8c1^1</span></td><td>@0=upward-saw -> @64=triangle</td></tr>
                    <tr><td class='tone'>@64-127: <span class='mml'>#TABLE0{(64,128)64};%9@@0,2q8c1^1</span></td><td>@64=triangle -> @127=downward-saw</tr>
                  </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%10' Sampler</td>
                <td><b>Sampler module without pitch control.</b> Play mp3 data loaded internaly. You can select wave by note number like a drum track of MIDI sound module.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0(sample)<span class='mml'>%10v16l8cre4cce.c16rc16c16ercce.e16;%10o4l16[v16c8cv12c]8v16f1</span></td><td>* The SWF loaded some mp3 data for demonstration.</td></tr>
                  </tbody></table>
                </td>
              </tr>
              <tr>
                <td>'%11' PMS Guitar</td>
                <td><b>Physical Modeling Synthesize Guitar</b>Physical Modeling Synthesizer with Karplus-Strong alogrism.
                  <table class='no_border'><tbody>
                    <tr><td class='tone'>@0,48,48,0,0,20s8(default)<span class='mml'>%11@ph-1o3e1^1^2^8;%11@ph-1o3r8a1^1^2;%11@ph-1o4r4d1^1^4.;%11@ph-1r4.o4g1^1^4;%11@ph-1r2o4b1^1;%11@ph-1r8^2o5e1^1^8;</span></td><td>Classic guitar</td></tr>
                    <tr><td class='tone'>@0,48,48,0,0,16s4<span class='mml'>#T=%11@0,48,48,0,0,16s4@ph-1q8;t160;To3v12a1^1;To4v8r64e1^1;To4v7r32a1^1;To4v7r32.b1^1;To5v6r16e1^1;</span></td><td>Acoustic guitar</td></tr>
                    <tr><td class='tone'>@0,48,40,4,0,16s6@f96,0<span class='mml'>#EFFECT0{chorus delay};#T=%11@0,48,40,4,0,16s6@ph-1@f96,0q8;t160;To3v12$a1^1;To4v8r4$e1^1;To4v7r4.$a4a4a2a4a4a2;To4v7r2.$b2b2b1;To5v6r1$e1^1;</span></td><td>Clean sound (w/ chorus)</td></tr>
                    <tr><td class='tone'>@0,48,24,8,0,17s2@f80<span class='mml'>#T=%11@0,48,24,8,0,17s2@f80mp0,6,10,10@ph-1@v64,16;t160;#M=o3q8l8aga&lt;c^2&gt;aga&lt;c*d0rc4.&gt;aga&lt;d*edc&gt;s,-63a1^1;Tv12M;Tv8kt7M;</span></td><td>Distortion</td></tr>
                    <tr><td class='tone'>@0,48,40,4,80,18s32<span class='mml'>t144;%11@0,48,40,4,80,18s32q8o2q8l8$v16av12a&lt;c16cc+s40c+16s32deg&gt;a16&lt;s48a16&gt;s32a&lt;c&c+16de16&gt;v8s48ev12s32f+g+;</span></td><td>Slap bass</td></tr>
                  </tbody></table>
                </td>
              </tr>
            </tbody></table>
          </div>
        </div>
        <div class='appendex'>
          <div class='title'>The 2nd-15th argument of '@'</div>
          <div>
            The '@' command has 15 arguments to modify operators output, 1st argument for tone color, 2nd-7th arguments for envelop, 8th and 9th for key-scaling, 10th-12th for frequency, 13th-15th for others. These parameters are based on OPM. The operators parameter does not changed when the argument abbreviates. For the FM-module emulation (%6), these arguments modify an operator specifyed by 'i'.
            <pre class='formula'>@ <i>[ws], [ar], [dr], [sr], [rr], [sl], [tl], [ksr], [ksl], [mul], [dt1], [detune], [ams], [phase], [fixed pitch]</i></pre>
            <table class='no_border'><tbody>
              <tr>
                <td>n1; </td>
                <td><b>(Wave Shape)</b>Select tone color[0-1023]. See above appendex.</td>
              </tr>
              <tr>
                <td>n2; </td>
                <td><b>(Attack Rate)</b>Output amplification speed after key-on[0-63(63)]. Small values for slower attack. No rising edge (becomes maximum suddenly) for ar=63. Slowest rising for ar=1.</td>
              </tr>
              <tr>
                <td>n3; </td>
                <td><b>(Decay Rate)</b>Output attenuation after achieving maximum[0-63(0)]. Small values for slower decay. dr=63 makes Sustain Level suddenly after attack. dr=0 keeps maximum output until key-off.</td>
              </tr>
              <tr>
                <td>n4; </td>
                <td><b>(Sustain Rate)</b>Output attenuation after achieving Sustain Level[0-63(0)]. Small values for slower sustain. sr=63 makes silent suddenly after achieving Sustain Level. sr=0 keeps Sustain Level until key-off.</td>
              </tr>
              <tr>
                <td>n5; </td>
                <td><b>(Release Rate)</b>Output attenuation after key-off[0-63(28)]. Small values for slower release. rr=63 makes silent suddenly after key-off. rr=0 makes keeps output until next note. same as '@rr'.</td>
              </tr>
              <tr>
                <td>n6; </td>
                <td><b>(Sustain Level)</b>Output level of changing point from dr to sr. This is relative value with Total Level[0-15(0)]．[Changing point level]=[argument]x-1.5[dB]</td>
              </tr>
              <tr>
                <td>n7; </td>
                <td><b>(Total Level)</b>Maximum output level of envelop[0-127(0)]. [Maximum level]=[argument]x-0.375[dB]. Same as '@tl'.</td>
              </tr>
              <tr>
                <td>n8; </td>
                <td><b>(Key Scale Rate)</b>Correction faster envelop for higher pitch[0-3(0)]. 0.4[rate/octave] for ksr=0, 0.8 for ksr=1, 1.6 for ksr=2 and 3.2 for ksr=3.</td>
              </tr>
              <tr>
                <td>n9; </td>
                <td><b>(Key Scale Level)</b>Correction lower output for higher pitch[0-3(0)]. No correction for ksl=0, -0.15[dB/octave] for ksl=1;，-0.3 for ksl=2 and -0.6 for ksl=3.</td>
              </tr>
              <tr>
                <td>n10; </td>
                <td><b>(Multiple)</b>Multiplier for wave frequency[0-15(1)]. x0.5 for mul=0. Same as '@ml'.</td>
              </tr>
              <tr>
                <td>n11; </td>
                <td><b>(Detune1)</b>Parameter 'dt1' of OPM/OPN[0-7(0)]. Fine detune. 0-3 for pitch up and 4-7 for pitch down.</td>
              </tr>
              <tr>
                <td>n12; </td>
                <td><b>(Detune)</b>Detune [-8192-8191(0)]. The unit is same as 'kt'(64 for 1 halftone). Same as '@dt'.</td>
              </tr>
              <tr>
                <td>n13; </td>
                <td><b>(Amplitude Modulation Shift)</b>The width of Amplitude Modulation('ma' command) [0-3(1)]. ams=0 sets the amplitude modulation off.</td>
              </tr>
              <tr>
                <td>n14; </td>
                <td><b>(Phase)</b>Wave phase at the timing of key-on[0-255(0)]. ph=255 makes no phase reset on key-on. ph=-1 randamizes. [phase]=[argument]/128*PI. Same as '@ph'.</td>
              </tr>
              <tr>
                <td>n15; </td>
                <td><b>(Fixed note)</b>Fix wave frequencey. fx=0 makes not fixed. The argument of 60 means 'o5c'. Same as '@fx'.</td>
              </tr>
            </tbody></table>
          </div>
        </div>
        <div class='appendex'>
          <div class='title'>The arguments for '@al' (or also for the 1st argument of '#@')</div>
          <div>
            The '@al' command has 2 arguments to modify the number of operators and connecting algorism. The default value of 2nd argument is the parallel connecting argorism (2ope;alg=1, 3ope;alg=5, 4ope;alg=7). *The feedback connection can be modifyed by '@fb', but below figures are written with self-feedback connection in order to simplify.<br/>
            <table><tbody>
              <tr>
                <th>Operators</th>
                <th>Algolism</th>
              </tr>
              <tr>
                <td>1</td><td><img src='./image/opc1alg.png'/></td>
              </tr>
              <tr>
                <td>2</td><td><img src='./image/opc2alg.png'/></td>
              </tr>
              <tr>
                <td>3</td><td><img src='./image/opc3alg.png'/></td>
              </tr>
              <tr>
                <td>4</td><td><img src='./image/opc4alg.png'/></td>
              </tr>
            </tbody></table>
          </div>
        </div>
        <div class='appendex'>
          <div class='title'>The table for translate algorisms of various FM sound modules</div>
          <div>
            The connecting algorism of each FM tone color setting is translated to '@al' (and '@fb') command by below tables.<br/>
            <table>
              <thead>#OPM@/#OPN@</thead>
              <tbody>
                <tr><th>    </th><th>alg:0</th> <th>alg:1</th> <th>alg:2</th> <th>alg:3</th> <th>alg:4</th> <th>alg:5</th> <th>alg:6</th> <th>alg:7</th> </tr>
                <tr><th>2ope</th><td>@al2,0</td><td>@al2,1</td><td>@al2,1</td><td>@al2,1</td><td>@al2,1</td><td>@al2,0</td><td>@al2,1</td><td>@al2,1</td></tr>
                <tr><th>3ope</th><td>@al3,0</td><td>@al3,1</td><td>@al3,2</td><td>@al3,3</td><td>@al3,3</td><td>@al3,4</td><td>@al3,3</td><td>@al3,5</td></tr>
                <tr><th>4ope</th><td>@al4,0</td><td>@al4,1</td><td>@al4,2</td><td>@al4,3</td><td>@al4,4</td><td>@al4,5</td><td>@al4,6</td><td>@al4,7</td></tr>
              </tbody>
            </table>
            <table>
              <thead>#OPL@</thead>
              <tbody>
                <tr><th>    </th><th>alg:0</th> <th>alg:1</th> <th>alg:2</th> <th>alg:3</th> <th>alg:4</th> <th>alg:5</th> <th>alg:6</th> <th>alg:7</th> </tr>
                <tr><th>2ope</th><td>@al2,0</td><td>@al2,1</td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td></tr>
                <tr><th>3ope</th><td>@al3,0</td><td>@al3,3</td><td>@al3,2</td><td>@al3,2</td><td>error </td><td>error </td><td>error </td><td>error </td></tr>
                <tr><th>4ope</th><td>@al4,0</td><td>@al4,4</td><td>@al4,8</td><td>@al4,9</td><td>error </td><td>error </td><td>error </td><td>error </td></tr>
              </tbody>
            </table>
            <table>
              <thead>#MA@</thead>
              <tbody>
                <tr><th>    </th><th>alg:0</th> <th>alg:1</th> <th>alg:2</th> <th>alg:3</th> <th>alg:4</th> <th>alg:5</th> <th>alg:6</th> <th>alg:7</th> </tr>
                <tr><th>2ope</th><td>@al2,0</td><td>@al2,1</td><td>@al2,1</td><td>@al2,1</td><td>@al2,0</td><td>@al2,1</td><td>@al2,1</td><td>@al2,1</td></tr>
                <tr><th>3ope</th><td>error </td><td>error </td><td>@al3,5</td><td>@al3,2</td><td>@al3,0</td><td>@al3,3</td><td>@al3,2</td><td>@al3,2</td></tr>
                <tr><th>4ope</th><td>error </td><td>error </td><td>@al4,7</td><td>@al4,2</td><td>@al4,0</td><td>@al4,4</td><td>@al4,8</td><td>@al4,9</td></tr>
              </tbody>
            </table>
            <table>
              <thead>#OPX@</thead>
              <tbody>
                <tr><th>    </th><th>alg:0</th> <th>alg:1</th> <th>alg:2</th> <th>alg:3</th> <th>alg:4</th> <th>alg:5</th> <th>alg:6</th> <th>alg:7</th> <th>alg:8</th> <th>alg:9</th> <th>alg:10</th> <th>alg:11</th> <th>alg:12</th> <th>alg:13</th> <th>alg:14</th> <th>alg:15</th> </tr>
                <tr><th>2ope</th><td>@al2,0</td><td>@al2,0<br/>@fb0,1</td><td>@al2,1</td><td>@al2,2</td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td></tr>
                <tr><th>3ope</th><td>@al3,0</td><td>@al3,0<br/>@fb0,1</td><td>@al3,1</td><td>@al3,2</td><td>@al3,3</td><td>@al3,3<br/>@fb0,1</td><td>@al3,5</td><td>@al3,6</td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td><td>error </td></tr>
                <tr><th>4ope</th><td>@al4,0</td><td>@al4,0<br/>@fb0,1</td><td>@al4,1</td><td>@al4,2</td><td>@al4,3</td><td>@al4,3<br/>@fb0,1</td><td>@al4,4</td><td>@al4,4<br/>@fb0,1</td><td>@al4,8</td><td>@al4,11</td><td>@al4,6</td><td>@al4,6<br/>@fb0,1</td><td>@al4,5</td><td>@al4,9</td><td>@al4,12</td><td>@al4,7</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class='appendex'>
          <div class='title'>The arguments of '@f'</div>
          <div>
            The '@f' command has 10 arguments, the 1st and 2nd arguments for LPF setting and 3rd-10th arguments for LPF envelop.
            <pre class='formula'>@f <i>[co], [res], [ar], [dr], [sr], [rr], [co2], [co3], [sc], [rc]</i></pre>
            <table class='no_border'><tbody>
              <tr>
                <td>n1; </td>
                <td><b>(Cutoff Freq.)</b>Cut off frequency[0-128(128)]. 128 for full open.</td>
              </tr>
              <tr>
                <td>n2; </td>
                <td><b>(Resonance)</b>Resonance[0-9(0)]. 0 for no resonance, 9 for maximum.</td>
              </tr>
              <tr>
                <td>n3; </td>
                <td><b>(Attack Rate)</b>Attack[0-63(0)]. The changing speed from Cutoff Freq. to Cutoff Freq.#2. ar=0 keeps Cutoff Freq. ar=63 changes suddenly.</td>
              </tr>
              <tr>
                <td>n4; </td>
                <td><b>(Decay Rate)</b>Decay[0-63(0)]. The changing speed from Cutoff Freq.#2 to Cutoff Freq.#3．dr=0 keeps Cutoff Freq.#2. dr=63 changes suddenly.</td>
              </tr>
              <tr>
                <td>n5; </td>
                <td><b>(Sustain Rate)</b>Sustain[0-63(0)]. The changing speed from Cutoff Freq.#3 to Suatain Freq. sr=0 keeps Cutoff Freq.#3. sr=63 changes suddenly.</td>
              </tr>
              <tr>
                <td>n6; </td>
                <td><b>(Release Rate)</b>Release[0-63(0)]. The changing speed from key-off to Release Freq. rr=0 keeps cutoff frequency at key-off. rr=63 changes suddenly.</td>
              </tr>
              <tr>
                <td>n7; </td>
                <td><b>(Cutoff Freq.#2)</b>Cutoff frequency #2[0-128(128)]．2nd cutoff frequency after Attack.</td>
              </tr>
              <tr>
                <td>n8; </td>
                <td><b>(Cutoff Freq.#3)</b>Cutoff frequency #3[0-128(64)]．3rd cutoff frequency after Decay.</td>
              </tr>
              <tr>
                <td>n9; </td>
                <td><b>(Sustain CutOff)</b>Cutoff frequency after Sustain[0-128(32)]．4th cutoff frequency. This frequency is kept until key-off.</td>
              </tr>
              <tr>
                <td>n10; </td>
                <td><b>(Release CutOff)</b>Cutoff frequency after key-off[0-128(128)]. The cutoff frequency changes into this value after key-off, when rr>0.</td>
              </tr>
            </tbody></table>
            <img src='./image/filter.png' alt='filter parameters' title='filter parameters'/>
          </div>
        </div>
        <div class='appendex'>
          <div class='title'>%7;PCM and %10;Sampler</div>
          <div>
            Both of them play mp3 data loaded in the SWF.<br/>
            PCM sound module can control the pitch and you can use all commands as FM sound module except for @al and @fb.<br/>
            On the other hand, Sampler cannot change the pitch and you cannot use ADSR envelop and filter, but you can assign waves on each note.<br/>
            * In this example, the SWF loaded some mp3 data for demonstration.
<pre class='example'>
// PCM sound module can control pitch.
%7@0l8c.c.gf.f.&lt;c&gt;rccgf.f.&lt;c;
</pre>
<pre class='example'>
// Sampler assigns a wave on each note.
%10v16l8cre4cce.c16rc16c16ercce.e16;
%10o4l16[v16c8cv12c]8v16f1;
</pre>
          </div>
        </div>
        <div class='appendex'>
          <div class='title'>%11; Control the voice of PMS guitar</div>
          <div>
The voice of physical modeling synthesis guitar (%11) is controled by "@", "s" and "@f" commands.<br/><br/>
"@" command defines a plunk profile. The meanings of 2nd and following arguments depend on the 1st argument.<br/>
<pre class='formula'>@0,<i>[ar],[dr],[tl],[pitch],[ws]</i></pre>
When the 1st argument is 0, voice is defined by following 5 arguments.<br/>
The 2nd, 3rd and 4th arguments are for the attack rate, decay rate and total level of a plunking energy, respectively. The meanings are same as FM synth.<br/>
The 5th argument is for the pitch of plunking noise and specifyed by note number (defalut=60=o5c).<br/>
The 6th argument is for the wave shape of plunking noise and specifyed by wave number of %5 (defalut=20=pink noise).<br/>
<pre class='formula'>@1,<i>[FM voice number]</i></pre>
<pre class='formula'>@2,<i>[PCM wave number]</i></pre>
When the 1st argument is 1 or 2, the 2nd argument specifies FM voice number or PCM wave number, respectively. In this case, you can use FM voice or PCM wave as a plunk noise.<br/><br/>
"s" command defines the attenuation of string energy.<br/><br/>
"@f" command defines low-pass filter same as other voices.
          </div>
        </div>
      </div>
      
      <h3>Trigger</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>%t<i>n1</i>,<i>n2</i>,<i>n3</i></td>
            <td class='range'>n1; - (0)<br/>n2; 0 - 3 (1)<br/>n3; 0 - 3 (1)</td>
            <td class='desc'><b>(event <u>T</u>rigger)Event trigger setting. </b>This command is used to interlock with ActionScript. The 1st argument sets trigger ID, 2nd argument sets trigger type for note on and 3rd argument sets trigger type for note off.</td>
          </tr>
          <tr>
            <td class='state'>%e<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; - (0)<br/>n2; 0 - 3 (1)</td>
            <td class='desc'><b>(dispatch <u>E</u>vent)Dispatch note on event once. </b>This command is used to interlock with ActionScript. The 1st argument sets trigger ID, 2nd argument sets trigger type.</td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>Event trigger</div>
          <div>
            After the "%t" command, SiONTrackEevnt.NOTE_ON_STREAM, SiONTrackEevnt.NOTE_OFF_STREAM, SiONTrackEevnt.NOTE_ON_FRAME and SiONTrackEevnt.NOTE_OFF_FRAME events are dispatched at each timing of note command(c-b).<br/>
            The 2nd and 3rd argument sets which type of event are dispatching (0;Do nothing, 1;dispatch NOTE_*_FRAME，2;dispatch NOTE_*_STREAM, 3;dispatch both).<br/>
            The NOTE_*_STREAM event is dispatched when the note appears in the rendering timing, And the NOTE_*_FRAME event is dispatched when the note sounds.<br/>
            The "%e" command dispatches note on events once at that timing. The arguments are same as "%t".
          </div>
        </div>
      </div>

      <h3>Low Frequency Occilator (LFO) Modulation</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>@lfo<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 1 - (20)<br/>n2; 0 - 3 (2)</td>
            <td class='desc'><b>(<u>L</u>ow <u>F</u>requency <u>O</u>scilator)Setting of LFO.</b> The 1st argument sets time cycle of LFO (60=1[sec]) and 2nd argument sets wave shape (0;downward saw, 1;square, 2;triangle, 3;random, 4-7;phase invered 0-3, 8-255;refer #TABLE). When you refer #TABLE, the table length is 256 and the value is ranged in 0-255. This command initilaizes settings of 'mp' and 'ma' ("mp0ma0").
<pre class='example'>
@lfo30 mp32c1 @lfo10 mp32c1
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>mp<i>n1</i>,<i>n2</i>,<i>n3</i>,<i>n4</i></td>
            <td class='range'>n1; 0 - 8191 (0)<br/>n2; 0 - 8192 (0)<br/>n3; 0 - 65535 (0)<br/>n4; 0 - 65535 (0)</td>
            <td class='desc'><b>(<u>P</u>itch <u>M</u>odulation)Setting of pitch modulation (Vibrato).</b> This command swings pitch by LFO. n1(modulation) and n2(end modulation) values are on 64=1 halftone．n3(delay) and n4(changing time) values are on frame count.
<pre class='example'>
mp8,32,60,40 c1^1
</pre>
            </td>
          <tr>
            <td class='state'>ma<i>n1</i>,<i>n2</i>,<i>n3</i>,<i>n4</i></td>
            <td class='range'>n1; 0 - 8191 (0)<br/>n2; 0 - 8192 (0)<br/>n3; 0 - 65535 (0)<br/>n4; 0 - 65535 (0)</td>
            <td class='desc'><b>(<u>A</u>mplitude <u>M</u>odulation)Setting of volume modulation (Tremolo).</b> This command swings volume by LFO. n1(modulation) and n2(end modulation) values are same as Total Level when ams=3. The width of modulation depends on 'ams' parameter of  each operator. n3(delay) and n4(changing time) values are on frame count.
<pre class='example'>
ma0,32,60,40 c1^1
</pre>
            </td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>The arguments of 'mp' and 'ma'</div>
          <div>
            When key is on, modulation is [1st argument]. And if [1st argument] < [2nd argument], it keeps modulation of [1st argument] during [3rd argument] frames, and then it changes modulation into [2nd argument] for [4th argument] frames.<br/>
            <img src='./image/modulation.png' alt='modulation parameters' title='modulation parameters'/>
          </div>
        </div>
      </div>

      <h3>Table envelop</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>@fps<i>n</i></td>
            <td class='range'>1 - 1000 (default value is specifyed by #FPS)</td>
            <td class='desc'><b>(<u>F</u>rame <u>P</u>er <u>S</u>econd) Setting of frame counter.</b> This command sets the speed of '@@','na','np','nt','nf','_@@','_na','_np','_nt','_nf','po','@rr','mp' and 'ma' by frame per second.
<pre class='example'>
#TABLE0{(0,12)30}; q8 nt0 @fps30 c1 @fps120 c1;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@@<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(tone envelop) Tone color number changing by table.</b> This overwrites '@' by table during key-on.
<pre class='example'>
#TABLE0{(0,32)32}; q8 %3 @@0,5 c1^1;  // Changes tone color from '%3@0' to '%3@31' for 5 frames each.
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>na<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(<u>A</u>mplitude <u>EN</u>velop) Volume envelop by table.</b> This overwrites 'x' by table during key-on.
<pre class='example'>
#TABLE0{(128,0)10 (64,0)10|(32,0)10}; na0q8 l2cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>np<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(<u>P</u>itch <u>EN</u>velop) Pitch envelop by table.</b> This controls 'k' by table, but it is independent from 'k' commands value.
<pre class='example'>
#TABLE0{(0,128,-64,0)60}; np0q8 c1;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>nt<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(no<u>T</u>e <u>EN</u>velop) Note changing by table.</b> This controls 'kt' by table, but it is independent from 'kt' commands value.
<pre class='example'>
#TABLE0{|0,4,7}; nt0 cde; // high speed arpeggio by table
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>nf<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(<u>F</u>ilter <u>EN</u>velop) Filter envelop by table.</b> This controls '@f' by table, but it is independent from '@f' commands value.
<pre class='example'>
#TABLE0{|(128,64,128)20}; nf0 c1; // Wah-wah
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>_@@<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(release tone envelop) Tone color number changing by table after key-off.</b> This overwrites '@' by table after key-off.
<pre class='example'>
#TABLE0{|1,5};q4 %5 _@@0 cdef;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>_na<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(release <u>A</u>mplitude <u>EN</u>velop) Volume envelop by table after key-off.</b> This overwrites 'x' by table after key-off. When you want control envelop after key-off only by this command, you have to set 's0' because this command is independent from '@rr' or 's'.
<pre class='example'>
#TABLE0{32}; _na0 q4s0cder _na255x0c;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>_np<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(release <u>P</u>itch <u>EN</u>velop) Pitch envelop by table after key-off.</b> This controls 'k' by table after key-off, but it is independent from 'k','s' and '@rr' commands value.
<pre class='example'>
#TABLE0{(0,64,0)20}; _np0 q4cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>_nt<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(release no<u>T</u>e <u>EN</u>velop) Note changing by table after key-off.</b> This controls 'kt' by table after key-off, but it is independent from 'kt' commands value.
<pre class='example'>
#TABLE0{|0,3,7}; _nt0 q4cde;
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>_nf<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'><b>(release <u>F</u>ilter <u>EN</u>velop) Filter envelop by table after key-off.</b> This controls '@f' by table after key-off, but it is independent from '@f' commands value.
<pre class='example'>
#TABLE0{(0,128)20}; _nf0 q2cde;
</pre>
            </td>
          </tr>
          <tr class='notrec'>
            <td class='state'>!na<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 255 (255)<br/>n2; 1 - 65535 (1)</td>
            <td class='desc'>[NOT RECOMMENDED](Amplitude ENvelope) Relative volume envelop. This command adds table values on original 'x' value.</td>
          </tr>
        </tbody></table>
        <div class='appendex'>
          <div class='title'>The arguments of table envelop commands</div>
          <div>
            These table envelop commands refer a table defined by #TABLE. When [1st argument] = 255, the envelop is canceled. And the 2nd argument specifys speed of a envelop by frame count.
<pre class='example'>
#TABLE0{|0,4,7}; nt0,1c nt0,2c nt0,5c; // 2nd argument sets speed
</pre>
          </div>
        </div>
<!--
        <div class='appendex'>
          <div class='title'>Embeded table</div>
          <div>
            You can write the table directly at the 1st argument position of table envelop commands. This table cannot be refered from other command. The embeded table can be defined 256 at maximum separately from #TABLE.
<pre class='example'>
nt{|0,4,7} cde; // Table can be written in MML sequence directly.
</pre>
          </div>
        </div>
-->
      </div>
      
      <h3>Bus pipe control commands</h3>
      <div class='table'>
        <table><tbody>
          <tr>
            <th class='state'>Statement</th>
            <th class='range'>Range</th>
            <th class='desc'>Description</th>
          </tr>
          <tr>
            <td class='state'>@o<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 2 (0)<br/>n2; 0 - 3 (0)</td>
            <td class='desc'><b>(<u>O</u>utput pipe)Pipe output.</b> You can connect channels by '@i' or '@r' after this channel.<br/>
              The 1st argument sets output mode (0;Normal stereo output, 1;Overwrite pipe, 2;Add pipe). The 2nd argument sets output pipe index(0-3).
<pre class='example'>
@o1 %5q8s0 cde; @i5 %5 cde; 
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@i<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 7 (5)<br/>n2; 0 - 3 (0)</td>
            <td class='desc'><b>(freqency modulating <u>I</u>nput pipe)Pipe input as a modulator of FM connection.</b> You can use the data in pipe as a modulator of FM connection.
              The 1st argument sets modulation (0-7, 0;off, 5;modulation of OPM). The 2nd argument sets input pipe index(0-3).
<pre class='example'>
@o1 %5q8s0 cde; @i3 %5 cde;  // frequency modulation
</pre>
            </td>
          </tr>
          <tr>
            <td class='state'>@r<i>n1</i>,<i>n2</i></td>
            <td class='range'>n1; 0 - 8 (4)<br/>n2; 0 - 3 (0)</td>
            <td class='desc'><b>(<u>R</u>ing modulating input pipe)Pipe input as a modulator of Ring modulation connection.</b> You can use the data in pipe as a modulator of Ring modulation connection.
              The 1st argument sets modulation (0-9, 0;off, 4;modulation of C64 SID chip). The 2nd argument sets input pipe index(0-3).
<pre class='example'>
@o1 %5q8s0 cde; @r5 %5gab;  // ring modulation
</pre>
            </td>
          </tr>
        </tbody></table>
      </div>
    </div>
  </body>
</html>


